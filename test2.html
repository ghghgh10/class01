<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
  <style type="text/css">
    section{
      padding: 20px;
      margin: 0 auto;
      border: 2px solid #333;
    }
    button{
      padding: 50px;
    }
  </style>

</head>
<body>
  <section>
  <div id="tex"></div>
  <button type="button" id="button">button</button>
  </section>
	<script>
val geolocationCallback: GeolocationPermissions.Callback? = null

webView.setWebChromeClient(new WebChromeClient(){
    @Override
    public void onGeolocationPermissionsShowPrompt(String origin, GeolocationPermissions.Callback callback) {
        super.onGeolocationPermissionsShowPrompt(origin, callback);
        //필요한 시점에 invoke() 함수 호출을 하기위해 변수 저장
        geolocationCallback = callback
        
        //위치권한 확인 및 요청
    }
});

    function getLocation() {
    const tex=document.querySelector("#tex")
  if (navigator.geolocation) { // GPS를 지원하면
    navigator.geolocation.getCurrentPosition(function(position) {
      tex.innerHTML=`${position.coords.latitude + ' ' + position.coords.longitude}`;
    }, function(error) {
      console.error(error);
    }, {
      enableHighAccuracy: false,
      maximumAge: 0,
      timeout: Infinity
    });
  } else {
    tex.innerHTML=`('GPS를 지원하지 않습니다')`;
  }
}
getLocation();

document.getElementById("button")
    .addEventListener("click", function(event) {
	
      if (navigator.geolocation) { 
    navigator.geolocation.getCurrentPosition(function(position){
         alert("위도: " + position.coords.latitude +", 경도: " + position.coords.longitude);
        event.preventDefault();
      })
    }
  });
		
window.android.grantAuthority("location");
</script>
	
</body>
</html>
